<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css"
      rel="stylesheet"
    />
    <link
      href="https://getbootstrap.com/docs/5.3/assets/css/docs.css"
      rel="stylesheet"
    />
    <title>Bootstrap Example</title>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.bundle.min.js"></script>
    <link rel="stylesheet" href="style.css">
  </head>
  <body>
    <div class="container p-2">
      <div class="mb-3 d-flex justify-content-center align-item-center">
        <h1 class="text-center btn btn-warning rounded-pills fs-2">
          Online Meal Entrys
        </h1>
      </div>
      <form name="submit-to-google-sheet">
        <div class="mb-3 mt-3">
          <label for="Date" class="form-label">Date:</label>
          <input
            type="date"
            id="Date"
            name="Date"
            class="form-control"
            placeholder="Date"
            required
          />
        </div>
        <div class="mb-3 mt-3">
          <label for="Name" class="form-label">Name:</label>
          <input
            type="text"
            id="Name"
            name="Name"
            class="form-control"
            placeholder="Name"
            required
          />
        </div>
        <div class="mb-3 mt-3">
          <label for="Breakfast" class="form-label">Breakfast:</label>
          <input
            type="number"
            id="Breakfast"
            name="Breakfast"
            class="form-control"
            placeholder="Breakfast"
            min="0.5"
            max="10"
            step="0.5"
            required
          />
        </div>
        <div class="mb-3 mt-3">
          <label for="Launch" class="form-label">Launch:</label>
          <input
            type="number"
            id="Launch"
            name="Launch"
            class="form-control"
            placeholder="Launch"
            min="0.5"
            max="10"
            step="0.5"
            required
          />
        </div>
        <div class="mb-3 mt-3">
          <label for="Dinner" class="form-label">Dinner:</label>
          <input
            type="number"
            id="Dinner"
            name="Dinner"
            class="form-control"
            placeholder="Dinner"
            min="0.5"
            max="10"
            step="0.5"
            required
          />
        </div>
        <button type="submit" class="btn btn-primary">Submit</button>
      </form>
      <br />
      <p id="msg"></p>
      <br />

      <div class="excelShit">
        <a href="#" class="text-decoration-none fs-2 btn btn-info"
          >Click here to view the excel sheet</a
        >
      </div>
    </div>


    
    
    <script>
      const scriptURL ='https://script.google.com/macros/s/AKfycbwocPx1zRwOC5zZGGK7DvXUdSLt6KhM8dosZu20WlmmlDWBfZydbM9Wn39iXmXzK7K-/exec'
      const form = document.forms['submit-to-google-sheet'];

      const message = document.getElementById('msg')
    
      form.addEventListener('submit', e => {
        e.preventDefault()
        fetch(scriptURL, { method: 'POST', body: new FormData(form)})
          .then(response => {
            message.innerHTML = "Meal entry successfull";
            setTimeout(() => {
              message.innerHTML = "";
            }, 3000);
            form.reset();
          })
          .catch(error => {
            message.innerHTML = "Something is wrong";
            setTimeout(() => {
              message.innerHTML = "";
            }, 3000);
            form.reset();
          })
      })
    </script>
  </body>
</html>
